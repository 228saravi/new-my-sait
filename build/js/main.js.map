{"version":3,"sources":["main.js"],"names":["preloader","percentsTotal","$","imgPath","map","ndx","element","background","css","img","is","path","replace","attr","setPercents","total","current","persents","Math","ceil","text","fadeOut","loadImages","images","length","forEach","i","fakeImage","src","on","init","imgs","toArray"],"mappings":";;AAAA,IAAIA,YAAa,YAAY;AACzB,MAAIC,gBAAgB,CAApB;AAAA,MACED,YAAYE,EAAE,YAAF,CADd;;AAGA,MAAIC,UAAUD,EAAE,GAAF,EAAOE,GAAP,CAAW,UAAUC,GAAV,EAAeC,OAAf,EAAwB;AAC/C,QAAIC,aAAaL,EAAEI,OAAF,EAAWE,GAAX,CAAe,kBAAf,CAAjB;AAAA,QACEC,MAAMP,EAAEI,OAAF,EAAWI,EAAX,CAAc,KAAd,CADR;AAAA,QAEEC,OAAO,EAFT;;AAIA,QAAIJ,cAAc,MAAlB,EAA0B;AACxBI,aAAOJ,WAAWK,OAAX,CAAmB,OAAnB,EAA4B,EAA5B,EAAgCA,OAAhC,CAAwC,IAAxC,EAA8C,EAA9C,CAAP;AACD;;AAED,QAAIH,GAAJ,EAAS;AACPE,aAAOT,EAAEI,OAAF,EAAWO,IAAX,CAAgB,KAAhB,CAAP;AACD;;AAED,QAAIF,IAAJ,EAAU,OAAOA,IAAP;AAEX,GAfa,CAAd;;AAiBA,MAAIG,cAAc,SAAdA,WAAc,CAAUC,KAAV,EAAiBC,OAAjB,EAA0B;AAC1C,QAAIC,WAAWC,KAAKC,IAAL,CAAUH,UAAUD,KAAV,GAAkB,GAA5B,CAAf;;AAEAb,MAAE,sBAAF,EAA0BkB,IAA1B,CAA+BH,WAAW,GAA1C;;AAEA,QAAIA,YAAY,GAAhB,EAAqB;AACnBjB,gBAAUqB,OAAV;AACD;AACF,GARD;;AAUA,MAAIC,aAAa,SAAbA,UAAa,CAAUC,MAAV,EAAkB;;AAEjC,QAAI,CAACA,OAAOC,MAAZ,EAAoBxB,UAAUqB,OAAV;;AAEpBE,WAAOE,OAAP,CAAe,UAAUhB,GAAV,EAAeiB,CAAf,EAAkBH,MAAlB,EAA0B;AACvC,UAAII,YAAYzB,EAAE,OAAF,EAAW;AACzBW,cAAM;AACJe,eAAKnB;AADD;AADmB,OAAX,CAAhB;;AAMAkB,gBAAUE,EAAV,CAAa,YAAb,EAA2B,YAAY;AACrC5B;AACAa,oBAAYS,OAAOC,MAAnB,EAA2BvB,aAA3B;AACD,OAHD;AAID,KAXD;AAYD,GAhBD;;AAkBA,SAAO;AACL6B,UAAM,gBAAY;AAChB,UAAIC,OAAO5B,QAAQ6B,OAAR,EAAX;;AAEAV,iBAAWS,IAAX;AACD;AALI,GAAP;AAOD,CAxDc,EAAjB;AAyDE7B,EAAE,YAAY;AACZF,YAAU8B,IAAV;AACD,CAFD","file":"main.js","sourcesContent":["var preloader = (function () {\r\n    var percentsTotal = 0,\r\n      preloader = $('.preloader');\r\n  \r\n    var imgPath = $('*').map(function (ndx, element) {\r\n      var background = $(element).css('background-image'),\r\n        img = $(element).is('img'),\r\n        path = '';\r\n  \r\n      if (background != 'none') {\r\n        path = background.replace('url(\"', '').replace('\")', '');\r\n      }\r\n  \r\n      if (img) {\r\n        path = $(element).attr('src');\r\n      }\r\n  \r\n      if (path) return path\r\n  \r\n    });\r\n  \r\n    var setPercents = function (total, current) {\r\n      var persents = Math.ceil(current / total * 100);\r\n  \r\n      $('.preloader__percents').text(persents + '%');\r\n  \r\n      if (persents >= 100) {\r\n        preloader.fadeOut();\r\n      }\r\n    }\r\n  \r\n    var loadImages = function (images) {\r\n  \r\n      if (!images.length) preloader.fadeOut();\r\n  \r\n      images.forEach(function (img, i, images) {\r\n        var fakeImage = $('<img>', {\r\n          attr: {\r\n            src: img\r\n          }\r\n        });\r\n  \r\n        fakeImage.on('load error', function () {\r\n          percentsTotal++;\r\n          setPercents(images.length, percentsTotal);\r\n        });\r\n      });\r\n    }\r\n  \r\n    return {\r\n      init: function () {\r\n        var imgs = imgPath.toArray();\r\n  \r\n        loadImages(imgs);\r\n      }\r\n    }\r\n  }());\r\n  $(function () {\r\n    preloader.init();\r\n  });"]}